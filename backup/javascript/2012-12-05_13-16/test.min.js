// Add ECMA262-5 method binding if not supported natively
//
"bind"in Function.prototype||(Function.prototype.bind=function(a){var b=this;if(arguments.length<=1)return function(){return b.apply(a,arguments)};var c=Array.prototype.slice.call(arguments,1);return function(){return b.apply(a,arguments.length===0?c:c.concat(Array.prototype.slice.call(arguments)))}}),"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),"indexOf"in Array.prototype||(Array.prototype.indexOf=function(a,b){b===undefined&&(b=0),b<0&&(b+=this.length),b<0&&(b=0);for(var c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1}),"lastIndexOf"in Array.prototype||(Array.prototype.lastIndexOf=function(a,b){b===undefined&&(b=this.length-1),b<0&&(b+=this.length),b>this.length-1&&(b=this.length-1);for(b++;b-->0;)if(b in this&&this[b]===a)return b;return-1}),"forEach"in Array.prototype||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;c<d;c++)c in this&&a.call(b,this[c],c,this)}),"map"in Array.prototype||(Array.prototype.map=function(a,b){var c=new Array(this.length);for(var d=0,e=this.length;d<e;d++)d in this&&(c[d]=a.call(b,this[d],d,this));return c}),"filter"in Array.prototype||(Array.prototype.filter=function(a,b){var c=[],d;for(var e=0,f=this.length;e<f;e++)e in this&&a.call(b,d=this[e],e,this)&&c.push(d);return c}),"every"in Array.prototype||(Array.prototype.every=function(a,b){for(var c=0,d=this.length;c<d;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0}),"some"in Array.prototype||(Array.prototype.some=function(a,b){for(var c=0,d=this.length;c<d;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1}),function(){this.module||(this.module=function(a,b){var c,d;return typeof a=="string"&&(a=a.split(".")),c=this[d=a.shift()]||(this[d]={}),c.module||(c.module=this.module),a.length?c.module(a,b):b.call(c)})}.call(this),function(){this.module("paper",function(){return this.Fusion=function(){function a(a,b,c,d,e,f){var g;f==null&&(f=null),g=this.get_media_zone_path(a,c),this.media_zone=this.get_media_zone(g,[b,f],c),this.layout=this.get_layout(g,d,e)}return a.name="Fusion",a.prototype.get_media_zone_path=function(a,b){var c;return c=a.split("/"),c=c.filter(function(a){return a!==""}),c.length>0&&c[c.length-1].indexOf(".")>=0&&c.pop(),c.length===0&&c.push(b),c.join(".")},a.prototype.get_media_zone=function(a,b,c){return b=b.filter(function(a){return a!=null&&a!==""}),b.concat(a).join(".")},a.prototype.get_layout=function(a,b,c){return b[a]||c},a.prototype.setup_environment=function(a,b){return a==null&&(a=this.media_zone),b==null&&(b=this.layout),window.Fusion.adServer="fusion.adtoma.com",window.Fusion.mediaZone=a,window.Fusion.layout=b,window.Fusion.parameters.url_path=window.location.pathname,window.Fusion.parameters.url=window.location.href,window.Fusion.loadAds()},a}()})}.call(this),function(){this.module("paper",function(){return this.AdaptLogic=function(){function a(a,b,c,d){this.department=this.get_department(a,c,d)}return a.name="AdaptLogic",a.prototype.get_department=function(a,b,c){var d,e;return e=a.split("/").filter(function(a){return a!=null&&a!==""}),d=e.shift(),b[d]||c},a}()})}.call(this),function(){var a,b,c,d,e;d={"nyheter.hofors":"hoforslayout",test:"testlayout"},e="/nyheter/hofors/test.html",c=new this.paper.Fusion(e,"mkt.gdse","nyheter.ettan",d,"gd_1"),b={slaktvanner:"familj",kulturnoje:"noje"},e="/kulturnoje/test",a=new this.paper.AdaptLogic(e,"ostersundsposten",b,"nyheter")}.call(this);